# Changelog

<!-- https://keepachangelog.com/en/1.1.0/ -->

## Unreleased

[compare changes](https://github.com/senekor/ec2hx/compare/v1.6.0...HEAD)

### Breaking

### Changed

### Added

### Fixed

## 1.6.0 - 2025-02-10

[compare changes](https://github.com/senekor/ec2hx/compare/v1.5.0...v1.6.0)

### Added

- The `trim_trailing_whitespace` is now supported for many more languages. The
  formatter config to support this key was never applied to languages that have
  a formatter or LSP defined, because those could provide better formatting.
  However, the default languages.toml defines many formatters and LSPs the user
  may not even have installed. `ec2hx` now parses the output of `hx --health` to
  determine for which languages an LSP or formatter is actually installed, so it
  can generate the `trim_trailing_whitespace` formatter config for the remaining
  ones.

### Fixed

- `ec2hx` doesn't generate files anymore that only contain comments.

## 1.5.0 - 2025-02-10

[compare changes](https://github.com/senekor/ec2hx/compare/v1.4.2...v1.5.0)

### Added

- Arbitrary path globs in editorconfig section headers are now supported.

- The files generated by `ec2hx` are now marked as such with a comment.

### Fixed

- The `unset` value for properties is now supported.

## 1.4.2 - 2025-02-08

[compare changes](https://github.com/senekor/ec2hx/compare/v1.4.1...v1.4.2)

### Fixed

- The formatter config for `trim_trailing_whitespace` was applied to languages
  that appear explicitly in the `.editorconfig` file without checking if the
  language already has a formatter or LSP configured. That could lead to these
  configs being overwritten erroneously, which is now fixed.

## 1.4.1 - 2025-02-08

[compare changes](https://github.com/senekor/ec2hx/compare/v1.4.0...v1.4.1)

### Fixed

- `rustls` is now used instead of `openssl` to fix the CI builds.

## 1.4.0 - 2025-02-08

[compare changes](https://github.com/senekor/ec2hx/compare/v1.3.0...v1.4.0)

### Added

- `ec2hx` now attempts to fetch and cache the latest version of Helix' default
  languages.toml file. While a pinned version is still embedded as fallback,
  this will reduce the need to publish updated versions of `ec2hx` as more
  languages are added upstream. The cache is refreshed up to once per week.

- User configuration of Helix is now considered. For example, if you have
  custom languages defined in `~/.config/helix/languages.toml`, `ec2hx` will now
  generate the appropriate configuration for those as well.

- The `trim_trailing_whitespace` key is now supported. This is achieved with a
  built-in formatter that does the trimming. However, the configuration for this
  formatter is only generated for languages which don't already have an LSP or
  formatter configured. If you do not have the preconfigured LSP or formatter
  for some language installed and would like to use this generic one, consider
  manually adding the below formatter config to the language of your choice,
  either in your user configuration or the project-specific one.
  ```toml
  formatter = { command = "ec2hx", args = ["trim-trailing-whitespace"] }
  auto-format = true
  ```

### Fixed

- If `max_line_length` is only set in the global `[*]` editorconfig section,
  `ec2hx` will now generate `text-width` overrides for every language in
  addition to the global setting.

- In some cases, `ec2hx` could generate project-specific configuration that's
  simply copied from the global Helix configuration. This doesn't do any damage
  immediately, but if the user later changes their Helix config, that change
  won't be respected in the project where `ec2hx` was used. This is fixed.

## 1.3.0 - 2025-02-07

[compare changes](https://github.com/senekor/ec2hx/compare/v1.2.0...v1.3.0)

### Added

- The `max_line_length` key is now supported. From the Helix documentation:

  > Used for the `:reflow` command and soft-wrapping if `soft-wrap.wrap-at-text-width` is set

- A new CLI flag `--rulers` adds rulers matching `max_line_length`.

## 1.2.0 - 2025-02-07

[compare changes](https://github.com/senekor/ec2hx/compare/v1.1.0...v1.2.0)

### Added

- If the EditorConfig file only specifies one of `indent_style` and `indent_size`
  globally or for a specific language, the values in the default `languages.toml`
  of Helix will be used to fill in the gaps and generate a complete configuration
  for more languages. For example, consider the following EditorConfig:
  ```editorconfig
  [Makefile]
  indent_size = 8
  ```
  This will now result in the following Helix configuration, because the default
  `languages.toml` already specifies that Makefile should be indented with tabs.
  ```toml
  indent = { tab-width = 8, unit = "\t" }
  ```

- Square brackets in section header globs are now supported. For example,
  C-files can be configured with the header `[*.[ch]]`.

- The `tab_width` key is now supported.

### Fixed

- Properly ignore sections that contain `\` in the header.

## 1.1.0 - 2025-01-21

[compare changes](https://github.com/senekor/ec2hx/compare/v1.0.0...v1.1.0)

### Changed

- If a Helix configuration already exists, the new one is now written as a
  patch against the old one with instructions on how to apply it.

### Added

- Additional file globs to which global configuration should be applied can now
  be specified on the command line with `--fallback-globs`. Without this option,
  global configuration is only applied to languages Helix knows about.

## 1.0.0 - 2025-01-17

[compare changes](https://github.com/senekor/ec2hx/tree/v1.0.0)

### Added

- First version.
